<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        table{
            width: 200px;
            margin: 0 auto;
            text-align: center;
            border-collapse: collapse;
        }
        thead th{
            background-color: aqua;
        }

        table tr{
            border: 1px solid #ccc;
        }
    </style>
</head>

<body>
    <table>
        <thead>
            <tr>
                <th>
                    <input type="checkbox" class="th_inpt">
                </th>
                <th>商品</th>
                <th>价钱</th>
            </tr>
        </thead>
        <tbody class="tb_input">
            <tr>
                <td>
                    <input type="checkbox">
                </td>
                <td>iPhone3</td>
                <td>8000</td>
            </tr>
            <tr>
                <td>
                    <input type="checkbox">
                </td>
                <td>iPhone3</td>
                <td>8000</td>
            </tr>
            <tr>
                <td>
                    <input type="checkbox" >
                </td>
                <td>iPhone3</td>
                <td>8000</td>
            </tr>
        </tbody>
    </table>

    <script>
        //全选按钮的全选和取消
        //获取事件源
        var inpt = document.querySelector('.th_inpt'); //获得全选按钮
        var rinpt = document.querySelector('.tb_input').querySelectorAll('input'); //获得下面三个按钮的集合

        //点击全选按钮时选中下面三个按钮
        inpt.onclick = function(){
            //遍历下面三个按钮
            for(var i = 0 ; i <rinpt.length ; i++){
                //将全选按钮的checked 赋值给他们
                rinpt[i].checked = this.checked;
            }
        }

        //当下面三个按钮全选中时，全选按钮也需要选上
        // 通过for循环给下面三个按钮添加点击事件
        for(var i = 0 ; i < rinpt.length ; i++){
            rinpt[i].onclick = function(){
                //定义一个变量用于判断
                var flag = true;
                //选中一个按钮时，需要判断其他按钮是否被选上
                for(var j = 0 ; j < rinpt.length ; j++){
                    if(!rinpt[j].checked){ //当有其他按钮未被选上时，返回false
                        flag = false;
                        break;
                    }
                }
                inpt.checked = flag;

            }
        }

    </script>
</body>

</html>